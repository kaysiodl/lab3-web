<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

<h:head>
    <title>Lab3 Web JSF</title>
    <meta charset="UTF-8"/>
    <link rel="stylesheet" href="./resources/css/styles.css"/>
</h:head>

<h:body>
    <div class="container">
        <div id="canvas-container">
            <canvas id="coordinateSystem" width="400px" height="400px"></canvas>
        </div>

        <h:form id="pointForm" styleClass="point-form">
            <div id="x-container">
                <h:outputLabel for="x" value="Введите X:"
                               style="color:#d48a8a; font-weight: 600"/>
                <p:selectOneRadio id="x" value="#{check.x}">
                    <f:selectItem itemLabel="-5" itemValue="-5"/>
                    <f:selectItem itemLabel="-4" itemValue="-4"/>
                    <f:selectItem itemLabel="-3" itemValue="-3"/>
                    <f:selectItem itemLabel="-2" itemValue="-2"/>
                    <f:selectItem itemLabel="-1" itemValue="-1"/>
                    <f:selectItem itemLabel="0" itemValue="0"/>
                    <f:selectItem itemLabel="1" itemValue="1"/>
                    <f:selectItem itemLabel="2" itemValue="2"/>
                    <f:selectItem itemLabel="3" itemValue="3"/>
                    <p:ajax update="hidden-x"/>
                </p:selectOneRadio>
                <h:inputHidden id="hidden-x" value="#{check.x}"
                               required="true"
                               requiredMessage="Выберите значение X"/>
            </div>
            <div id="y-container">
                <h:outputLabel for="y" value="Введите Y:"/>
                <h:inputText id="y" value="#{check.y}"
                             required="true"
                             requiredMessage="Введите координату Y"/>
            </div>
            <div id="r-container">
                <h:outputText id="output" value="Выберите R: #{check.r}"
                              style="color:#d48a8a; font-weight: 600"/>
                <h:inputHidden id="r-input" value="#{check.r}"/>
                <p:slider for="r-input"
                          display="output"
                          minValue="1.0"
                          maxValue="4.0"
                          step="0.25"
                          displayTemplate="Выберите R: {value}"
                          onSlideEnd="handleR()">
                    <p:ajax event="slideEnd" process="@this r-input" update="output"/>
                </p:slider>
            </div>
            <p:commandButton id="submit-button" value="Отправить" action="#{check.save()}"
                             styleClass="submit-button" process="@form" ajax="true" update="table-form"/>
            <h:commandButton class="navigation-button" action="toIndex" value="Вернуться на стартовую страницу"/>
        </h:form>

        <div class="results">
            <h3>Результаты попадания</h3>
            <h:form id="table-form">
                <p:dataTable value="#{results.results}" var="result"
                             rendered="#{not empty results.results}" id="resultsTable">
                    <p:column headerText="X">
                        <h:outputText value="#{result.x}"/>
                    </p:column>
                    <p:column headerText="Y">
                        <h:outputText value="#{result.y}"/>
                    </p:column>
                    <p:column headerText="R">
                        <h:outputText value="#{result.r}"/>
                    </p:column>
                    <p:column headerText="Результат">
                        <h:outputText value="#{result.hit}"/>
                    </p:column>
                    <p:column headerText="Время выполнения">
                        <h:outputText value="#{result.time}"/>
                    </p:column>
                    <p:column headerText="Время">
                        <h:outputText value="#{result.currentTime}"/>
                    </p:column>
                </p:dataTable>
                <h:commandButton value="Очистить" action="#{results.clear()}"
                                 styleClass="clear-button" update="table-form"/>
            </h:form>
        </div>
    </div>


    <h:outputScript library="primefaces" name="jquery/jquery.js"/>
    <h:outputScript name="coordinateSystem.js" library="js"/>
    <h:outputScript name="main.js" library="js"/>
</h:body>
</html>